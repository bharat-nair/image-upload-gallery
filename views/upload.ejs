<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Upload Photo</title>
</head>
<div class="container pt-5">
    <body class="bg-light">
        <nav class="navbar navbar-light bg-dark">
            <ul class="navbar nav">
                <li class="nav-item">
                    <a href="/" class="nav-link">Gallery</a>

                </li>
                <li class="nav-item">
                    <a href="/upload" class="nav-link">Upload</a>
                </li>
            </ul>
            
        </nav>
        <form action="/upload" method="post" enctype="multipart/form-data">
        
        <div class="container pt-2 pb-5 mx-auto">
            <img id="preview" height="100" width="100">
            <div class="alert alert-danger"style="width:50%;float:right">
                <ul>
                    <li>Image must be in .jpg format.</li>
                    <li>Size of image must not exceed 5 MB.</li>
                </ul>
            </div>
        </div>    

        <div class="input-group" style="width:60%">
            <div class="custom-file">
                <input type="file" class="custom-file-input" onchange="showPreview()" id="image" name="image">
                <label class="custom-file-label" for="inputGroupFile04" id="filename">Choose file</label>
            </div>
            
                <button class="btn btn-outline-secondary" type="submit" onsubmit="validateFile()">Upload</button>
        </div>
        
        <%# <button class="btn btn-primary" type="submit">Upload</button> %>
        </form>
</body>
</div>
<script>
    function validateFile(){
        invalidExt = true;
        filename = document.getElementById("image").value;
        console.log("filename is",filename)
        exts = filename.split(".");
        console.log("exts are",exts);
        for(i=0;i<exts.length;i++){
            if(exts[i] === "jpg"){
                if(exts.reverse().indexOf("jpg") == 0){
                    invalidExt = false;
                    document.getElementById("filename").innerText = docume
                }
            }
        }
        if(invalidExt)
            alert("Please Select a valid image file (.jpg extensions only)");    
    }
    function showPreview(){
        var files = document.getElementById("image").files
        // console.log(files)
        console.log(window.URL.createObjectURL(files[0]))
        document.getElementById("preview").src = window.URL.createObjectURL(files[0]);
        validateFile();
    }
    
</script>
</html>